<?xml version='1.0'?>
<robot name="omnibot" xmlns:xacro="http://www.ros.org/wiki/xacro">

    <xacro:property name="PI" value="3.1415926535897931"/>

    <xacro:include filename="$(find omnibot_description)/models/omnibot/model.gazebo" />

    <!-- Joint to keep the robot up in midair -->
    <!--<link name="world"/>-->
    <!--<joint name="world_base_link" type="fixed">-->
        <!--<parent link="world"/>-->
        <!--<child link="base_link"/>-->
        <!--<origin rpy="0 0 0" xyz="0 0 1"/>-->
        <!--<axis xyz="1 0 0"/>-->
    <!--</joint>-->

    <!-- Links -->
    <link name="base_link"/>
    <link name="body">
        <inertial>
            <mass value="8"/>
            <origin rpy="0 0 0" xyz="0 0 0.20"/>
            <inertia ixx="0.198" ixy="0" ixz="0" iyy="0.198" iyz="0" izz="0.13"/>
        </inertial>
        <collision name='collision'>
            <origin rpy="0 0 0" xyz="0 0 0.22"/>
            <geometry>
                <box size="0.25 0.25 0.40"/>
            </geometry>
        </collision>
        <visual name="visual">
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <mesh filename="package://omnibot_description/meshes/body.stl" scale="0.001 0.001 0.001"/>
            </geometry>
        </visual>
    </link>
    <link name="left_front_wheel">
        <inertial>
            <mass value="0.5"/>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <inertia ixx="0.075" ixy="0" ixz="0" iyy="0.075" iyz="0" izz="0.3"/>
        </inertial>
        <collision name='collision'>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.05" length="0.03" />
            </geometry>
        </collision>
        <visual name="visual">
            <origin rpy="0 0 0" xyz="0.05 0 0"/>
            <geometry>
                <mesh filename="package://omnibot_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
            </geometry>
        </visual>
    </link>
    <link name="left_back_wheel">
        <inertial>
            <mass value="0.5"/>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <inertia ixx="0.075" ixy="0" ixz="0" iyy="0.075" iyz="0" izz="0.3"/>
        </inertial>
        <collision name='collision'>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.05" length="0.03" />
            </geometry>
        </collision>
        <visual name="visual">
            <origin rpy="0  0 0" xyz="0.05 0 0"/>
            <geometry>
                <mesh filename="package://omnibot_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
            </geometry>
        </visual>
    </link>
    <link name="right_front_wheel">
        <inertial>
            <mass value="0.5"/>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <inertia ixx="0.075" ixy="0" ixz="0" iyy="0.075" iyz="0" izz="0.3"/>
        </inertial>
        <collision name='collision'>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.05" length="0.03" />
            </geometry>
        </collision>
        <visual name="visual">
            <origin rpy="0 0 0" xyz="0.05 0 0"/>
            <geometry>
                <mesh filename="package://omnibot_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
            </geometry>
        </visual>
    </link>
    <link name="right_back_wheel">
        <inertial>
            <mass value="0.5"/>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <inertia ixx="0.075" ixy="0" ixz="0" iyy="0.075" iyz="0" izz="0.3"/>
        </inertial>
        <collision name='collision'>
            <origin rpy="0 1.57 0" xyz="0 0 0"/>
            <geometry>
                <cylinder radius="0.05" length="0.03" />
            </geometry>
        </collision>
        <visual name="visual">
            <origin rpy="0 0 0" xyz="0.05 0 0"/>
            <geometry>
                <mesh filename="package://omnibot_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
            </geometry>
        </visual>
    </link>
    <link name="camera" />

    <!-- Joints -->
    <joint name="base_link_body" type="fixed">
        <parent link="base_link"/>
        <child link="body"/>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <axis xyz="1 0 0"/>
    </joint>
    <joint type="revolute" name="left_front_wheel_hinge">
        <child link="left_front_wheel"/>
        <parent link="body"/>
        <origin rpy="0 0 0.785398" xyz="-0.15 -0.15 0"/>
        <axis xyz="1 0 0"/>
        <dynamics damping="0.0" friction="40.0" />
        <limit effort="100"  lower="-1e10" upper="1e10" velocity="1"/>
    </joint>
    <joint type="revolute" name="right_front_wheel_hinge">
        <child link="right_front_wheel"/>
        <parent link="body"/>
        <origin rpy="0 0 3.92699" xyz="0.15 0.15 0"/>
        <axis xyz="1 0 0"/>
        <dynamics damping="0.0" friction="40.0" />
        <limit effort="100"  lower="-1e10" upper="1e10" velocity="1"/>
    </joint>
    <joint type="revolute" name="left_back_wheel_hinge">
        <child link="left_back_wheel"/>
        <parent link="body"/>
        <origin rpy="0 0 2.35619" xyz="0.15 -0.15 0"/>
        <axis xyz="1 0 0"/>
        <dynamics damping="0.0" friction="40.0" />
        <limit effort="100"  lower="-1e10" upper="1e10" velocity="1"/>
    </joint>
    <joint type="revolute" name="right_back_wheel_hinge">
        <child link="right_back_wheel"/>
        <parent link="body"/>
        <origin rpy="0 0 5.49779" xyz="-0.15 0.15 0"/>
        <axis xyz="1 0 0"/>
        <dynamics damping="0.0" friction="40.0" />
        <limit effort="100"  lower="-1e10" upper="1e10" velocity="1"/>
    </joint>
    <joint name="camera_joint" type="fixed">
        <parent link="base_link" />
        <child link="camera" />
        <origin rpy="0 0 1.57" xyz="0 0.12 0.45"/>
    </joint>

    <!-- Transmission -->
    <transmission name="left_front_wheel_hinge">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="left_front_wheel_hinge">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor1">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="right_front_wheel_hinge">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="right_front_wheel_hinge">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor2">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="left_back_wheel_hinge">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="left_back_wheel_hinge">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor3">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
    <transmission name="right_back_wheel_hinge">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="right_back_wheel_hinge">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor4">
            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>

</robot>
