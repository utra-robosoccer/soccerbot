<robot name="bez2" xmlns:xacro="http://www.ros.org/wiki/xacro">
    <xacro:macro name="leg" params="name origin direction">
        <link name="$(arg tf_prefix)/${name}_hip_side">
            <inertial>
            <origin xyz="1.9172787457666374e-07 -0.0077457386860268485 1.3828988838782141e-07" rpy="0 0 0"/>
            <mass value="0.023116469719045966"/>
            <inertia ixx="8e-06" iyy="7e-06" izz="3e-06" ixy="-0.0" iyz="0.0" ixz="-0.0"/>
          </inertial>
          <visual>
            <origin xyz="${(direction * 0.0652) + 0.216834} 0.224201 -0.015289" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_hip_side.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
            <material name="steel_satin"/>
          </visual>
          <collision>
            <origin xyz="${(direction * 0.0652) + 0.216834} 0.224201 -0.015289" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_hip_side.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
          </collision>
        </link>
        <link name="$(arg tf_prefix)/${name}_hip_front">
            <inertial>
            <origin xyz="0.00054199420852305 -0.012130624367135301 0.0004997464984967115" rpy="0 0 0"/>
            <mass value="0.7328385746044006"/>
            <inertia ixx="0.000458" iyy="0.000394" izz="0.000195" ixy="-1e-06" iyz="-2e-06" ixz="-8e-06"/>
          </inertial>
          <visual>
            <origin xyz="${(direction * 0.0652) + 0.216834} 0.252201 0.005211" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_hip_front.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
            <material name="steel_satin"/>
          </visual>
          <collision>
            <origin xyz="${(direction * 0.0652) + 0.216834} 0.252201 0.005211" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_hip_front.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
          </collision>

        </link>
        <link name="$(arg tf_prefix)/${name}_thigh">
            <inertial>
            <origin xyz="-0.018793854860002318 -0.06540844430287307 1.382897246455378e-07" rpy="0 0 0"/>
            <mass value="0.191955361852033"/>
            <inertia ixx="0.000121" iyy="6.9e-05" izz="0.000159" ixy="1e-06" iyz="0.0" ixz="-0.0"/>
          </inertial>
          <visual>
            <origin xyz="${(direction * 0.0652) + 0.196534} 0.252201 -0.01556" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_thigh.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
            <material name="steel_satin"/>
          </visual>
          <collision>
            <origin xyz="${(direction * 0.0652) + 0.196534} 0.252201 -0.01556" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_thigh.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
          </collision>

        </link>
        <link name="$(arg tf_prefix)/${name}_calve">
            <inertial>
            <origin xyz="-0.023267641569652553 -0.03085299717338086 0.0003497080567835976" rpy="0 0 0"/>
            <mass value="0.20304073544640247"/>
            <inertia ixx="0.00015" iyy="6.2e-05" izz="0.000176" ixy="-2e-06" iyz="2e-06" ixz="0.0"/>
          </inertial>
          <visual>
            <origin xyz="${(direction * 0.0652) + 0.191266} 0.368201 -0.01556" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_calve.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
            <material name="steel_satin"/>
          </visual>
          <collision>
            <origin xyz="${(direction * 0.0652) + 0.191266} 0.368201 -0.01556" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_calve.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
          </collision>
        </link>
        <link name="$(arg tf_prefix)/${name}_ankle">
            <inertial>
            <origin xyz="-0.02305678575314518 -0.017837916213576277 -0.020655013251792347" rpy="0 0 0"/>
            <mass value="0.26345509510176346"/>
            <inertia ixx="0.000212" iyy="0.000173" izz="0.000102" ixy="-2e-06" iyz="-1.7e-05" ixz="-1e-06"/>
          </inertial>
          <visual>
            <origin xyz="${(direction * 0.0652) + 0.191266} 0.456201 -0.01686" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_ankle.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
            <material name="steel_satin"/>
          </visual>
          <collision>
            <origin xyz="${(direction * 0.0652) + 0.191266} 0.456201 -0.01686" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_ankle.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
          </collision>
        </link>
        <link name="$(arg tf_prefix)/${name}_foot">
            <inertial>
            <origin xyz="${direction * -0.01810728287499444} -0.01978149677877339 0.0476420980971338" rpy="0 0 0"/>
            <mass value="0.37785469138016164"/>
            <inertia ixx="0.000905" iyy="0.001142" izz="0.000247" ixy="${direction * -5e-06}" iyz="1.4e-05" ixz="${direction * 2.6e-05}"/>
          </inertial>
          <visual>
            <origin xyz="${(direction * 0.0652) + 0.214766} 0.492201 0.04764" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_foot.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
            <material name="steel_satin"/>
          </visual>
          <collision>
            <origin xyz="${(direction * 0.0652) + 0.214766} 0.492201 0.04764" rpy="0 0 0"/>
            <geometry>
              <mesh filename="package://bez2_urdf_description/meshes/${name}_foot.${MODEL_TYPE}" scale="0.001 0.001 0.001"/>
            </geometry>
          </collision>
        </link>

        <joint name="${name}_leg_motor_0" type="revolute">
            <parent link="$(arg tf_prefix)/torso"/>
            <child link="$(arg tf_prefix)/${name}_hip_side"/>
            <origin xyz="${-(direction * 0.0652) - 0.216834}  -0.224201 0.015289" rpy="0 0 0"/>
            <axis xyz="0 ${direction * -1} 0"/>
            <dynamics damping="${XM430_DAMPING}" friction="${XM430_FRICTION}" />
            <limit effort="${XM430_TORQUE}" lower="-1.309" upper="0.524" velocity="${XM430_VELOCITY}"/>
        </joint>
        <joint name="${name}_leg_motor_1" type="revolute">
            <parent link="$(arg tf_prefix)/${name}_hip_side"/>
            <child link="$(arg tf_prefix)/${name}_hip_front"/>
            <origin xyz="0.0 -0.028 -0.0205" rpy="0 0 0"/>
            <axis xyz=" 0 0 1"/>
            <dynamics damping="${XM430_DAMPING}" friction="${XM430_FRICTION}" />
            <limit effort="${XM430_TORQUE}" lower="-${PI/4}" upper="${PI/2}" velocity="${XM430_VELOCITY}"/>
        </joint>
        <joint name="${name}_leg_motor_2" type="revolute">
            <parent link="$(arg tf_prefix)/${name}_hip_front"/>
            <child link="$(arg tf_prefix)/${name}_thigh"/>
            <origin xyz="0.0203 0.0 0.020771" rpy="0 0 0"/>
            <axis xyz="1.0 -0.0 -0.0"/>
            <dynamics damping="${XM430_DAMPING}" friction="${XM430_FRICTION}" />
            <limit effort="${XM430_TORQUE}" lower="-${PI/4}" upper="${PI*3/4}" velocity="${XM430_VELOCITY}"/>
        </joint>
        <joint name="${name}_leg_motor_3" type="revolute">
            <parent link="$(arg tf_prefix)/${name}_thigh"/>
            <child link="$(arg tf_prefix)/${name}_calve"/>
            <origin xyz="0.005268 -0.116 0.0" rpy="0 0 0"/>
            <axis xyz="1.0 -0.0 -0.0"/>
            <dynamics damping="${MX64_DAMPING}" friction="${MX64_FRICTION}" />
            <limit effort="${MX64_TORQUE}" lower="-2.793" upper="0" velocity="${MX64_VELOCITY}"/>
        </joint>
        <joint name="${name}_leg_motor_4" type="revolute">
            <parent link="$(arg tf_prefix)/${name}_calve"/>
            <child link="$(arg tf_prefix)/${name}_ankle"/>
            <origin xyz="0.0 -0.088 0.0013" rpy="0 0 0"/>
            <axis xyz="1.0 -0.0 -0.0"/>
            <dynamics damping="${MX64_DAMPING}" friction="${MX64_FRICTION}" />
            <limit effort="${MX64_TORQUE}" lower="-${PI/4}" upper="${PI/2}" velocity="${MX64_VELOCITY}"/>
        </joint>
        <joint name="${name}_leg_motor_5" type="revolute">
            <parent link="$(arg tf_prefix)/${name}_ankle"/>
            <child link="$(arg tf_prefix)/${name}_foot"/>
             <origin xyz="-0.0235 -0.036 -0.0645" rpy="0 0 0"/>
            <axis xyz="0.0 0.0 1.0"/>
            <dynamics damping="${MX64_DAMPING}" friction="${MX64_FRICTION}" />
            <limit effort="${MX64_TORQUE}" lower="-${PI/4}" upper="${PI/4}" velocity="${MX64_VELOCITY}"/>
        </joint>

        <transmission name="${name}_leg_motor_0">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_leg_motor_0">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="${name}_leg_motor_0">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
        <transmission name="${name}_leg_motor_1">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_leg_motor_1">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="${name}_leg_motor_1">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
        <transmission name="${name}_leg_motor_2">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_leg_motor_2">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="${name}_leg_motor_2">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
        <transmission name="${name}_leg_motor_3">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_leg_motor_3">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="${name}_leg_motor_3">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
        <transmission name="${name}_leg_motor_4">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_leg_motor_4">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="${name}_leg_motor_4">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>
        <transmission name="${name}_leg_motor_5">
            <type>transmission_interface/SimpleTransmission</type>
            <joint name="${name}_leg_motor_5">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
            </joint>
            <actuator name="${name}_leg_motor_5">
                <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
                <mechanicalReduction>1</mechanicalReduction>
            </actuator>
        </transmission>

        <gazebo reference="$(arg tf_prefix)/${name}_hip_side">
            <kp>${JOINT_KP}</kp>
            <kd>${JOINT_KD}</kd>
            <mu1>${JOINT_MU1}</mu1>
            <mu2>${JOINT_MU2}</mu2>
        </gazebo>
        <gazebo reference="$(arg tf_prefix)/${name}_hip_front">
            <kp>${JOINT_KP}</kp>
            <kd>${JOINT_KD}</kd>
            <mu1>${JOINT_MU1}</mu1>
            <mu2>${JOINT_MU2}</mu2>
        </gazebo>
        <gazebo reference="$(arg tf_prefix)/${name}_thigh">
            <kp>${JOINT_KP}</kp>
            <kd>${JOINT_KD}</kd>
            <mu1>${JOINT_MU1}</mu1>
            <mu2>${JOINT_MU2}</mu2>
        </gazebo>
        <gazebo reference="$(arg tf_prefix)/${name}_calve">
            <kp>${JOINT_KP}</kp>
            <kd>${JOINT_KD}</kd>
            <mu1>${JOINT_MU1}</mu1>
            <mu2>${JOINT_MU2}</mu2>
        </gazebo>
        <gazebo reference="$(arg tf_prefix)/${name}_ankle">
            <kp>${JOINT_KP}</kp>
            <kd>${JOINT_KD}</kd>
            <mu1>${JOINT_MU1}</mu1>
            <mu2>${JOINT_MU2}</mu2>
        </gazebo>
        <gazebo reference="$(arg tf_prefix)/${name}_foot">
            <mu1>${FOREARM_MU1}</mu1>
            <mu2>${FOREARM_MU2}</mu2>
        </gazebo>
    </xacro:macro>
</robot>
